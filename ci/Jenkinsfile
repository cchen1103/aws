node('master'){
  stage('Pull aws infra repo') {
    /* Pull aws infrastructure builder repo */

    dir('tf') {

      git url: 'https://github.com/cchen1103/aws.git'

     }
  }
  stage('Show build plan') {
    /* Show terraform build plan */

    def path
    path = pwd()
    docker.image('alpine').inside("--user=root -v ${path}/tf:/tf") {

      sh 'apk --update add terraform'
      sh 'terraform init'
      sh 'ls /tf'
      sh 'terraform plan /tf'

    }
  }
}
